<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Five-minute overview - Trunk Based Development</title>
    <meta name="generator" content="Hugo 0.85.0" />

    
    <meta name="description" content="A portal on this practice">
    
    <link rel="canonical" href="index.html">
    
    <meta name="author" content="paul-hammant">
    

    <meta property="og:url" content="https://trunkbaseddevelopment.com/5-min-overview/">
    <meta property="og:title" content="Trunk Based Development">
    <meta property="og:image" content="https://trunkbaseddevelopment.com/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Trunk Based Development">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('../fonts/icon.eot');
        src: url('../fonts/icon.eot')
               format('embedded-opentype'),
             url('../fonts/icon.woff')
               format('woff'),
             url('../fonts/icon.ttf')
               format('truetype'),
             url('../fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../stylesheets/application.css">
    <link rel="stylesheet" href="../stylesheets/temporary.css">
    <link rel="stylesheet" href="../stylesheets/palettes.css">
    <link rel="stylesheet" href="../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-light-blue">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Trunk Based Development: Five-minute overview
      </div>
    </div>

    

        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <div class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../images/logo.png">
        </div>
      
      <div class="name">
        <strong>Trunk Based Development</strong>
      </div>
    </div>
  </div>

  <div class="scrollable">
    <div class="wrapper">
      <hr>

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introduction" href="../index.html">
	
	Introduction
</a>



  
</li>



<li>
  
    



<a  title="Context" href="../context/index.html">
	
	Context
</a>



  
</li>



<li>
  
    



<a class="current" title="Five-minute overview" href="index.html">
	
	Five-minute overview
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Deciding factors" href="../deciding-factors/index.html">
	
	Deciding factors
</a>



  
</li>



<li>
  
    



<a  title="Version control system features" href="../vcs-features/index.html">
	
	Version control system features
</a>



  
</li>



<li>
  
    



<a  title="Version control system choices" href="../vcs-choices/index.html">
	
	Version control system choices
</a>



  
</li>



<li>
  
    



<a  title="Feature flags" href="../feature-flags/index.html">
	
	Feature flags
</a>



  
</li>



<li>
  
    



<a  title="Branch by Abstraction" href="../branch-by-abstraction/index.html">
	
	Branch by Abstraction
</a>



  
</li>



<li>
  
    



<a  title="Branch for release" href="../branch-for-release/index.html">
	
	Branch for release
</a>



  
</li>



<li>
  
    



<a  title="Release from trunk" href="../release-from-trunk/index.html">
	
	Release from trunk
</a>



  
</li>



<li>
  
    



<a  title="Styles and Trade-offs" href="../styles/index.html">
	
	Styles and Trade-offs
</a>



  
</li>



<li>
  
    



<a  title="Continuous Integration (CI)" href="../continuous-integration/index.html">
	
	Continuous Integration (CI)
</a>



  
</li>



<li>
  
    



<a  title="Committing straight to the trunk" href="../committing-straight-to-the-trunk/index.html">
	
	Committing straight to the trunk
</a>



  
</li>



<li>
  
    



<a  title="Short Lived Feature Branches" href="../short-lived-feature-branches/index.html">
	
	Short Lived Feature Branches
</a>



  
</li>



<li>
  
    



<a  title="Continuous Code Review" href="../continuous-review/index.html">
	
	Continuous Code Review
</a>



  
</li>



<li>
  
    



<a  title="Continuous Delivery (CD)" href="../continuous-delivery/index.html">
	
	Continuous Delivery (CD)
</a>



  
</li>



<li>
  
    



<a  title="Concurrent development of consecutive releases" href="../concurrent-development-of-consecutive-releases/index.html">
	
	Concurrent development of consecutive releases
</a>



  
</li>



<li>
  
    



<a  title="Application strangulation" href="../strangulation/index.html">
	
	Application strangulation
</a>



  
</li>



<li>
  
    



<a  title="Observed habits" href="../observed-habits/index.html">
	
	Observed habits
</a>



  
</li>



<li>
  
    



<a  title="You&#39;re doing it wrong" href="../youre-doing-it-wrong/index.html">
	
	You&#39;re doing it wrong
</a>



  
</li>



<li>
  
    



<a  title="Alternative branching models" href="../alternative-branching-models/index.html">
	
	Alternative branching models
</a>



  
</li>



<li>
  
    



<a  title="Monorepos" href="../monorepos/index.html">
	
	Monorepos
</a>



  
</li>



<li>
  
    



<a  title="Expanding Contracting Monorepos" href="../expanding-contracting-monorepos/index.html">
	
	Expanding Contracting Monorepos
</a>



  
</li>



<li>
  
    



<a  title="Game Changers" href="../game-changers/index.html">
	
	Game Changers
</a>



  
</li>



<li>
  
    



<a  title="Publications" href="../publications/index.html">
	
	Publications
</a>



  
</li>



<li>
  
    



<a  title="Book on this topic" href="../book/index.html">
	
	Book on this topic
</a>



  
</li>



<li>
  
    



<a  title="Key to branch diagrams" href="../key/index.html">
	
	Key to branch diagrams
</a>



  
</li>



<li>
  
    



<a  title="Contributions" href="../contributions/index.html">
	
	Contributions
</a>



  
</li>


        </ul>
        

        
        <hr>

        <ul>

          <li>
            <a href="https://github.com/paul-hammant/tbd" target="_blank" title="See GitHub Repo">
              Site Source on Github
            </a>
          </li>

          <li>
            <a href="https://github.com/paul-hammant/tbd/commit/7f6c170e3760e5ae5cb49fca37b73cfea475581d" target="_blank">
              SHA-1 Published: 7f6c170e3760e5ae5cb49fca37b73cfea475581d
            </a>
          </li>
          </li>
<iframe id="buy" width='160' height='400' src='https://leanpub.com/trunk-based-development/embed' frameborder='0' allowtransparency='true'></iframe>
          <li>
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1 style="color: white; padding: 32px 20px 72px; background-image:url(../images/LogoSlim.png); background-repeat: no-repeat; background-size: 100% auto"><span style="background-color: #5677fc">Five-minute overview </span></h1>

			<h2 id="distance">Distance</h2>
<div class="admonition quote">
<p class="admonition-title">Branches create distance between developers and we do not want that</p>
<span style="padding-left: 15px">â€” Frank Compagner, Guerrilla Games</span>
</div>
<br/>
<p>Assuming any network-accessible source control, physical distance is mitigated by AV technologies including
screen sharing. So we will not worry about that so much these days.</p>
<p>Frank&rsquo;s &lsquo;distance&rsquo; is about the distance to the integration of code from multiple components/modules/sub-teams for a
binary that could be deployed or shipped. The problematic distance is to code not yet in the single shared branch,
that might:</p>
<ul>
<li>break something unexpected once merged</li>
<li>be difficult to merge in.</li>
<li>not show that work was duplicated until it is merged</li>
<li>not show problems of incompatibility/undesirability that does not break the build</li>
</ul>
<p>Trunk-Based Development is a branching model that reduces this distance to the minimum.</p>
<h2 id="what-it-is">What it is</h2>
<div class="admonition note">
<p class="admonition-title">Notes</p>
<span><ul>
<li>Use of &ldquo;Developers&rdquo; throughout this site, means &ldquo;QA-automators&rdquo; for the same buildable thing, too.</li>
<li>When we say &lsquo;the trunk&rsquo; on this site, it is just a branch in a single repository that developers in a team are focusing on
for development. It may be called &lsquo;master&rsquo;. That hints at the fact that the branch in question may literally not be
called &lsquo;trunk&rsquo; at all.</li>
</ul>
</span>
</div>
<p>There are many deciding factors before a development team settles on Trunk-Based Development, but here is a short overview
of the practices if they do:</p>
<h3 id="releasability-of-work-in-progress">Releasability of work in progress</h3>
<p>Trunk-Based Development will always be <strong>release ready</strong></p>
<p>If an executive manager visited the development team and commanded &ldquo;Competitor X has launched feature Y, go
live now with what we have&rdquo;, the worst response would be &ldquo;give us one hour&rdquo;. The development team might have been very
busy with tricky or even time-consuming tasks (therefore partially complete), but in an hour, they are able to go live
with something just stabilized from the trunk. Perhaps they can do it in less than an hour. The rule, though, is to <strong>never break
the build</strong>, and <strong>always be release ready</strong> because the CIO or the business may surprise you.</p>
<h4 id="where-releases-happen">Where releases happen</h4>
<p>A key facilitating rule is that Trunk-Based Development teams exclusively <strong>either</strong> release directly from the
trunk - see <a href="../release-from-trunk/index.html">release from trunk</a>, <strong>or</strong> they make a branch from the trunk specifically for
the actual release. See <a href="../branch-for-release/index.html">Branch for release</a>.
Teams with a higher release cadence do the former, and those with a lower release cadence do the latter.</p>
<h3 id="checking-out--cloning">Checking out / cloning</h3>
<p>All developers in a team working on an application/service, clone and checkout from the trunk. They will
update/pull/sync from that branch many times a day, <strong>knowing</strong> that the build passes. Their fast
source-control system means that their delays are a matter of a few seconds for this operation. They are now
integrating their teammates' commits on an hour-by-hour basis.</p>
<h3 id="committing">Committing</h3>
<p>Similarly, developers completing a piece of development work (changes to source code), that does not
break the build, will commit it back to the trunk. That it does not break the build should be provable. The granularity of that commit (how many a developer
would implicitly do a day) can vary and is learned through experience, but commits are typically small.</p>
<p>The developer needs to run the build, to prove that they did not break anything with the commit <strong>before</strong> the commit
is pushed anywhere. They might have to do an update/pull/sync before they commit/push the changes back to the team&rsquo;s
version control server, and additional builds too. There&rsquo;s a risk of a race condition there, but let us assume that is not
going to happen for most teams.</p>
<h3 id="code-reviews">Code Reviews</h3>
<p>The developer needs to get the commit reviewed. Some teams will count the fact that the code was &lsquo;pair programmed&rsquo;
as an automatic review. Other teams will follow a conventional design where the commit is marshaled
for review before landing in the trunk. In modern portal solutions, marshaled nearly always means a branch/fork (Pull
Request) that is visible to the team.</p>
<p><img src="trunk_pr.png" alt="">
(<a href="../key/index.html">key</a>)</p>
<p>^ the speech bubbles are stylized code review comments</p>
<p>Code review branches can (and should) be
deleted after the code review is complete and be very short-lived. This is tricky for teams new to Trunk Based
Development.</p>
<p>Note: You want to keep
the commentary/approval/rejection that is part of the review for historical and auditing purposes, but you do not want to
keep the branch. Specifically, you do not want the developers to focus on the branch after the code review and merge back
to the trunk.</p>
<h2 id="a-safety-net">A safety net</h2>
<p><a href="../continuous-integration/index.html">Continuous Integration</a> (CI) daemons are set up to watch the trunk (and the
<a href="../short-lived-feature-branches/index.html">short-lived feature branches</a> used in review), and as quickly and completely as possible
loudly/visibly inform the team that the trunk is broken.  Some teams will lock the trunk and roll-back changes. Others
will allow the CI server to do that automatically.</p>
<p><img src="5trunk1.png" alt="">
(<a href="../key/index.html">key</a>)</p>
<p>The high bar is verifying the commit before it lands in the trunk. Short-lived Pull Request branches are the modern
place for that.</p>
<h2 id="developer-team-commitments">Developer team commitments</h2>
<p>As stated, developers are pledging to be rigorous and not break the build. They&rsquo;re also going to need to consider
the impact of their potentially larger commits, especially where renames or moves were wholesale, and adopt techniques
to allow those changes to be more easily consumed by teammates.</p>
<h2 id="drilling-into-distance">Drilling into &lsquo;Distance&rsquo;</h2>
<p>Problematic &lsquo;distance&rsquo; has a few tangible examples:</p>
<ul>
<li>Late merges of development that happened more than a couple of days ago.
<ul>
<li>Difficult merges in particular</li>
</ul>
</li>
<li>A breaking build that lowers development team throughput, and diverts resources while it is being fixed</li>
</ul>
<h1 id="references-elsewhere">References elsewhere</h1>
<p><!-- raw HTML omitted -->show references<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->


			<aside class="copyright" role="note">
				&copy; 2017-2020: <a href="https://devops.paulhammant.com/">Paul Hammant</a>. With Contributions <a href="../contributions/index.html">from friends</a>.
				Site built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				with
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme,
				via <a href="https://netlify.com/">Netlify</a>. &nbsp;
				<a href="https://github.com/paul-hammant/tbd/edit/master/content//_index.md">Contribute to this page</a>

			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="../deciding-factors/index.html" title="Deciding factors">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Deciding factors
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="../context/index.html" title="Context">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Context
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/trunkbaseddevelopment.com\/';
      var repo_id  = 'paul-hammant\/tbd';
    
    </script>

    <script src="../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }

      var showHideRefs = document.getElementById("showHideRefs");
      var refsElsewhereH1;
      var refsTable;
      if (showHideRefs) {
          refsElsewhereH1 = document.getElementById("references-elsewhere");
      }
      if (showHideRefs) {
          refsTable = refsElsewhereH1.nextElementSibling.nextElementSibling;
          hideRefs();
      }

      function hideRefs() {
          refsTable.style.display = "none";
          showHideRefs.innerHTML = "show references";
      }

      function toggleRefs() {
          if(refsTable.style.display == "block") {
              hideRefs();
          }
          else {
              refsTable.style.display = "block";
              showHideRefs.innerHTML = "hide references";
          }
      }


    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-24415524-3', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

